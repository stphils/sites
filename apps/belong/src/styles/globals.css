@tailwind base;
@tailwind components;
@tailwind utilities;

/* Add all of this to your styles/globals.css file.
 * Make sure to delete the old .tab-bar and .tab-link styles.
 */

/* Basic reset to fill the whole page */
html, body {
    margin: 0;
    padding: 0;
    /* FIX: Remove space before % */
    height: 100%;
    width: 100%;
    overflow: hidden; /* Prevents whole page from scrolling */
    /* FIX: Remove spaces around hyphens in font-family properties */
    font-family: -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    Helvetica,
    Arial,
    sans-serif;
}

/* Make body a flex container to hold panes + footer */
body {
    display: flex;
    /* FIX: Remove spaces around hyphen */
    flex-direction: column;
}

/* The main container */
.split-container {
    flex: 1; /* This makes it take all available space */
    display: flex;
    /* FIX: Remove space before % */
    width: 100%;
    overflow: hidden; /* Prevents resizing issues */

    /* * DEFAULT: Landscape Mode (Left/Right)
     * This will apply to desktop browsers and landscape devices.
     */
    /* FIX: Remove spaces around hyphen */
    flex-direction: row;
}

/* Styling for each content pane */
.split-pane {
    /* Let the content inside the pane scroll if needed */
    overflow: auto;
    /* FIX: Remove spaces around hyphen */
    background-color: #f9f9f9;
}

.split-pane iframe {
    /* FIX: Remove space before % */
    width: 100%;
    /* FIX: Remove space before % */
    height: 100%;
    border: none;
}

/* --- Sizing --- */

/* This pane gets 1/3 of the space */
#translate-pane {
    flex: 1; /* 1 part */
    /* Default (landscape) constraint */
    /* FIX: Remove spaces around hyphen and px */
    min-width: 300px;
    /* FIX: Remove spaces around hyphen */
    overflow-y: hidden; /* Hides vertical scrollbar */
    /* FIX: Remove spaces around hyphen */
    border-right: 1px solid #ddd;
}

/* This pane gets 2/3 of the space */
#carols-pane {
    flex: 2; /* 2 parts */
    /* The overflow:auto is already set on .split-pane,
     * which will make the song lyrics scrollable
     */

    /* FIX 2: Make the pane itself a column flex container */
    display: flex;
    /* FIX: Remove spaces around hyphen */
    flex-direction: column;

    overflow: hidden;
}


/* * OVERRIDE: Portrait Mode (Top/Bottom)
 * This media query applies when the height is greater than the width.
 */
@media(orientation: portrait) {
    .split-container {
        /* FIX: Remove spaces around hyphen */
        flex-direction: column; /* Stack top-to-bottom */
    }

    #translate-pane {
        /* Reset landscape constraint */
        min-width: 0;
        /* Apply portrait constraint */
        /* FIX: Remove spaces around hyphen and px */
        min-height: 200px; /* Protect this minimum height */
        /* FIX: Remove spaces around hyphen */
        border-right: none;
        /* FIX: Remove spaces around hyphen */
        border-bottom: 1px solid #ddd;
    }
}

/* --- STYLES FOR SONGBOOK --- */

/* Container for the song menu */
.song-nav {
    /* FIX: Remove spaces around hyphen */
    background-color: #fff;
    /* FIX: Remove spaces around hyphen */
    border-bottom: 1px solid #ccc;
    /* Sticky menu to the top of the pane */
    /* FIX: Remove spaces around hyphen */
    position: sticky;
    top: 0;
    /* FIX: Remove spaces around hyphen */
    z-index: 10;
}

/* The main button that shows the current song */
.song-menu-toggle {
    display: block;
    /* FIX: Remove space before % */
    width: 100%;
    /* FIX: Remove spaces around px */
    padding: 14px 40px 14px 20px; /* Extra padding on right for icon */
    cursor: pointer;
    border: none;
    /* FIX: Remove spaces around hyphen */
    background-color: #f9f9f9;
    /* FIX: Remove spaces around hyphen */
    font-size: 1.1rem;
    /* FIX: Remove spaces around hyphen */
    font-weight: 600;
    color: #005a9c;
    text-align: left;
    position: relative;
    /* FIX: Remove spaces around hyphen */
    transition: background-color 0.2s ease;
}

.song-menu-toggle:hover {
    /* FIX: Remove space before #f0f0f0 */
    background-color: #f0f0f0;
}

/* The 'v' icon on the dropdown button */
.song-menu-toggle::after {
    content: 'â–¼';
    position: absolute;
    /* FIX: Remove spaces around px */
    right: 20px;
    /* FIX: Remove space before % */
    top: 50%;
    /* FIX: Remove space before % */
    transform: translateY(-50%);
    /* FIX: Remove spaces around hyphen */
    font-size: 0.8em;
    color: #555;
    /* FIX: Remove spaces around hyphen */
    transition: transform 0.3s ease;
}

/* Rotate the icon when the menu is open */
.song-menu-toggle.open::after {
    transform: translateY(-50%) rotate(180deg);
}

/* The collapsible dropdown list */
.song-menu-dropdown {
    /* This creates the "concertina" effect */
    /* FIX: Remove spaces around hyphen */
    max-height: 0;
    overflow: hidden;
    /* FIX: Remove spaces around hyphen */
    transition: max-height 0.3s ease-out;
    /* FIX: Remove spaces around hyphen */
    background-color: #fff;
    /* FIX: Remove spaces around hyphen */
    border-top: 1px solid #eee;
}

/* The "open" class is added by JS to expand the menu */
.song-menu-dropdown.open {
    /* FIX: Remove spaces around hyphen and vh */
    max-height: 60vh; /* Just needs to be taller than the content */
    /* FIX: Remove spaces around hyphen */
    overflow-y: auto; /* Add scroll if list is very long */
}

/* The individual song links inside the menu */
.song-menu-link {
    display: block;
    /* FIX: Remove space before % */
    width: 100%;
    /* FIX: Remove spaces around px */
    padding: 12px 20px;
    cursor: pointer;
    border: none;
    /* FIX: Remove spaces around hyphen */
    background-color: transparent;
    /* FIX: Remove spaces around hyphen */
    font-size: 1rem;
    color: #333;
    text-align: left;
    /* FIX: Remove space before #f0f0f0 */
    border-bottom: 1px solid #f0f0f0;
}

.song-menu-link:hover {
    /* FIX: Remove spaces around hyphen */
    background-color: #f0f0f0;
}

/* Style for the *active* song in the list */
.song-menu-link.active {
    /* FIX: Remove spaces around hyphen */
    background-color: #e6f0f7;
    color: #005a9c;
    /* FIX: Remove spaces around hyphen */
    font-weight: 600;
}

/* Container for the song lyrics */
.song-content {
    flex: 1;
    /* FIX 2: Enable scrolling when contents overflow */
    overflow: auto;
    /* FIX: Remove spaces around px */
    padding: 24px;
    /* FIX: Remove spaces around hyphen */
    font-size: 1.1rem;
    /* FIX: Remove spaces around hyphen */
    line-height: 1.6;
    /* This is ESSENTIAL for preserving newlines from the JS string */
    /* FIX: Remove spaces around hyphen */
    white-space: pre-wrap;
}

/* Hide the song content area */
.song-content.hidden {
    display: none;
}

/* Style for the Contact Iframe container */
#contact-iframe-container {
    flex: 1;
    /* FIX: Remove space before % */
    width: 100%;
    display: none; /* Hidden by default */
    overflow: auto;
}

#contact-iframe-container.visible {
    display: block;
}

#contact-iframe-container iframe {
    /* FIX: Remove space before % */
    width: 100%;
    /* FIX: Remove space before % */
    height: 100%;
    border: none;
}

/* New style for the Contact link in the dropdown */
.song-menu-link.contact-link {
    /* FIX: Remove spaces around hyphen */
    background-color: #f7e6e6; /* Light red/pink to distinguish from songs */
    color: #c0392b;
    /* FIX: Remove spaces around hyphen */
    font-weight: 600;
}

/* This is the correct CSS for "roll upwards" */
.fab-menu {
    /* REMOVE: margin-bottom: 16px; */
    /* ADD: Absolute positioning relative to fab-container */
    position: absolute;
    bottom: 0; /* Anchor to the bottom edge of the container */
    right: 0; /* Anchor to the right edge of the container */

    /* Retain upward flow and alignment */
    display: flex;
    /* FIX: Remove spaces around hyphen */
    flex-direction: column-reverse;
    /* FIX: Remove spaces around hyphen */
    align-items: flex-end;
    /* FIX: Remove spaces around px */
    gap: 10px;

    /* CRITICAL FIX: Push the menu content up above the toggle button */
    /* FIX: Remove spaces around hyphen and px */
    margin-bottom: 76px; /* 56px (Toggle height) + 20px (bottom padding) */
}

/* Ensure the toggle button is aligned to the bottom right of the container */
#fab-toggle-button {
    position: absolute; /* Anchor button within the fixed container */
    bottom: 0;
    right: 0;
}

.fab-item {
    /* Pill-shape style */
    /* FIX: Remove spaces around px */
    height: 40px;
    width: auto;
    /* FIX: Remove spaces around px */
    padding: 0 16px;
    /* FIX: Remove spaces around px */
    border-radius: 20px;

    /* Shared styles */
    display: flex;
    /* FIX: Remove spaces around hyphen */
    justify-content: center;
    /* FIX: Remove spaces around hyphen */
    align-items: center;
    /* FIX: Remove spaces around hyphen */
    background-color: #3498db;
    color: white;
    border: none;
    cursor: pointer;
    /* FIX: Remove spaces around hyphen */
    text-decoration: none;
    /* FIX: Remove spaces around hyphen */
    font-size: 0.95rem;
    /* FIX: Remove spaces around hyphen */
    font-weight: 600;
    /* FIX: Remove spaces around hyphen */
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);

    /* Animation styles */
    transform: scale(0);
    /* FIX: Remove spaces around hyphen */
    transition: transform 0.2s ease, background-color 0.2s ease;
    /* This is the correct CSS for "roll upwards" */
    /* FIX: Remove spaces around hyphen */
    transform-origin: bottom right; /* Animate from the bottom right */
}

.fab-item:hover {
    /* FIX: Remove space before #2980b9 */
    background-color: #2980b9;
}

/* Special style for the 'Contact' button */
.fab-item.contact {
    /* FIX: Remove spaces around hyphen */
    background-color: #95a5a6;
    /* UPDATED: Make it a circle for the icon */
    /* FIX: Remove spaces around px */
    width: 40px; /* Match height */
    padding: 0; /* Remove text padding */
}
.fab-item.contact:hover {
    /* FIX: Remove space before #7f8c8d */
    background-color: #7f8c8d;
}

/* This controls the "roll out" animation */
.fab-container.open .fab-item {
    transform: scale(1);
}

/* Staggered animation delay */
/* This order is correct for 'column-reverse' layout */
/* The item closest to the '+' (nth-child(4)) animates first */
.fab-container.open .fab-item:nth-child(1) {
    /* FIX: Remove spaces around hyphen and s */
    transition-delay: 0.15s;
} /* Farthest (top) */
.fab-container.open .fab-item:nth-child(2) {
    /* FIX: Remove spaces around hyphen and s */
    transition-delay: 0.10s;
}
.fab-container.open .fab-item:nth-child(3) {
    /* FIX: Remove spaces around hyphen and s */
    transition-delay: 0.05s;
}
.fab-container.open .fab-item:nth-child(4) {
    /* FIX: Remove spaces around hyphen and s */
    transition-delay: 0.0s;
} /* Closest (bottom) */

.fab-container {
    /* --- ADD THESE STYLES TO FIX THE POSITIONING --- */
    position: fixed; /* Changed from relative to fixed for floating action button */
    /* FIX: Remove spaces around px */
    bottom: 20px; /* Adjust this value for desired bottom offset */
    /* FIX: Remove spaces around px */
    right: 20px; /* Adjust this value for desired right offset */
    /* ----------------------------------------------- */

    /* Ensure it is on top of other content */
    /* FIX: Remove spaces around hyphen */
    z-index: 1000;
    /* The second `position: relative;` was redundant, and `position: fixed` is better for a FAB */
    /* display: block; is also redundant with position:fixed/absolute/relative in this context */
}

.fab-toggle {
    /* Style to make it a large, circular button */
    /* FIX: Remove spaces around px */
    width: 56px;
    /* FIX: Remove spaces around px */
    height: 56px;
    /* FIX: Remove space before % */
    border-radius: 50%;

    /* Look and feel */
    /* FIX: Remove spaces around hyphen */
    background-color: #005a9c; /* Blue color for main action */
    color: white;
    /* FIX: Remove spaces around hyphen */
    font-size: 2rem; /* Size of the '+' sign */
    /* FIX: Remove spaces around hyphen and px */
    line-height: 56px; /* Center the text vertically */
    /* FIX: Remove spaces around hyphen */
    text-align: center;
    border: none;
    cursor: pointer;
    /* FIX: Remove spaces around hyphen */
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    /* FIX: Remove spaces around hyphen */
    transition: transform 0.3s ease, background-color 0.2s ease;
}

/* ADDED: CSS for Google Material Symbols */
.material-symbols-outlined {
    /* FIX: The font-family and other properties were already correct */
    font-family: 'Material Symbols Outlined';
    font-weight: normal;
    font-style: normal;
    /* FIX: Remove spaces around px */
    font-size: 24px; /* Default icon size */
    line-height: 1;
    /* FIX: Remove spaces around hyphen */
    letter-spacing: normal;
    /* FIX: Remove spaces around hyphen */
    text-transform: none;
    /* FIX: Remove spaces around hyphen */
    display: inline-block;
    /* FIX: Remove spaces around hyphen */
    white-space: nowrap;
    /* FIX: Remove spaces around hyphen */
    word-wrap: normal;
    direction: ltr;
    /* FIX: Remove spaces around hyphen */
    -webkit-font-smoothing: antialiased;
    /* FIX: Remove spaces around hyphen */
    text-rendering: optimizeLegibility;
    /* FIX: Remove spaces around hyphen */
    -moz-osx-font-smoothing: grayscale;
}
